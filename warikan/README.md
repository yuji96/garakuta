# 割り勘精算機

割り勘精算の最小手を計算する。LINE bot にしたら需要ありそうだけど今やる気はない。Google フォームと GAS にした方が UX よさそう。

## input

- 支払い者
- 支払額
- 金額指定

```csv
payer,amount,note
A,10000,
B,7000,
C,3500,
D,12000,
B,3000,"{""A"": 2000, ""B"": 1200, ""C"": 1000, ""D"": 2000}"
```

## output

100 円以内の損には目をつぶって、取引の小銭の数をなるべく減らす。

```
   init  result
A   125      25
B -3875      25
C  5625      25
D -1875     -75

   A     B  C     D
A  0     0  0   100
B  0     0  0     0
C  0  3900  0  1700
D  0     0  0     0

```

# 課題

コーナーケースがある。

```
A: -2000
B: -1500
C: +1000
D: +1000
E: +1500
```

最も手数が少ない解

```
E → B: 1500
D → A: 1000
C → A: 1000
```

一番得してる人が損してる人に渡した場合（現状）

```
E → A: 1500
D → B: 1000
C → A:  500
C → B:  500
```

## 案

高い方からではなく小さい C と D ををマージして +2000 にすれば、-2000 と相殺する手を見つけられる。ただし、人数が増えると組み合わせの数も大きくなるので効果は高くなさそう。
